---
import ContactUsFormXT24 from '@components/ContactUsFormXT24'
// import { LinkedInIcon } from '@components/Icons'
import AssetImage from '@components/team/AssetImage.astro'
import Layout from '@layouts/Layout.astro'
import speakers from '../data/xt25/speakers.json'

const { contactSubject } = Astro.props
---

<Layout
  title='XT25 Fintech Conference'
  ogImage='/images/XT25/XT25_SaveTheDate.png'
  ogTitle='XT25 Fintech Conference'
  ogDescription='Join fintech engineering leaders for a day of tech talks on GenAI, Platform Engineering, Banking, RegTech, System Architecture and more.'
>
  <div class='bg-zinc-800 pb-5'>
    <!-- Background Image Section -->
    <div
      class='relative bg-cover bg-center'
      style="background-image: url('/images/XT25/london-bridge.jpg'); background-size: cover;"
    >
      <div class='absolute inset-0 bg-black opacity-50'></div>
      <div
        class='container max-w-6xl mx-auto flex flex-col text-white relative'
      >
        <!-- JUXT Logo -->
        <div
          class='w-full px-5 sm:px-10 pt-5 sm:pt-10 flex flex-row justify-end'
        >
          <a href='/'>
            <img
              class='w-[150px] sm:w-[200px] md:w-[250px] max-w-[80%]'
              src='/images/logo.svg'
              alt='JUXT Logo'
            />
          </a>
        </div>

        <!-- Added empty space div to increase height -->
        <div class='flex-grow' style='min-height: 375px;'></div>

        <!-- XT25 Logo & Navigation -->
        <div class='p-5 pb-0 sm:px-10'>
          <div>
            <!-- Hidden H1 for SEO -->
            <h1 class='sr-only'>XT25 Fintech Conference</h1>

            <img
              width={600}
              src='/images/XT25/XT25 Header.png'
              alt='XT25 Fintech Conference Logo'
            />
            <div class='w-full pt-4 flex flex-row gap-3'>
              <!-- <span class='sm:hidden uppercase underline text-juxt'
                        ><a href='#register'>Register</a></span
                      > -->
              <!-- <p class='sm:hidden'>|</p> -->
              <!-- <span class='uppercase underline text-juxt font-bold'
                        ><a href='#speakers'>Speakers</a></span
                      > -->
              <!-- <p>|</p>
                      <span class='uppercase underline text-juxt'
                        ><a href='#agenda'>Agenda</a></span
                      > -->
            </div>
          </div>
          <div class='flex-grow' style='min-height: 75px;'></div>
        </div>
      </div>
    </div>

    <!-- Main content -->
    <div class='container max-w-6xl mx-auto text-white'>
      <div class='flex-grow' style='min-height: 10px;'></div>
      <div
        class='grid grid-cols-1 lg:grid-cols-2 lg:grid-flow-col p-5 pt-8 sm:p-10 sm:pt-12 gap-4'
      >
        <!-- Blurb -->
        <!-- <p class='font-light text-lg mb-2'>
          Engineering Leaders from global banks, fintech companies and hedge
          funds are meeting in London to explore how groundbreaking technology
          concepts, tools and solutions are shaping the future of financial
          services.
        </p> -->

        <!-- Details -->
        <h2 class='text-juxt font-bold text-2xl sm:font-bold sm:text-3xl mb-6'>
          Thursday 12th June 2025, London
        </h2>

        <!-- Event plan -->
        <div class='grid grid-cols-1 sm:max-lg:grid-cols-2 gap-12'>
          <div>
            <h3 class='text-lg font-bold'>9AM - 5PM</h3>
            <p class='font-light'>
              Join fintech leaders for a day of tech talks covering GenAI,
              Platform Engineering, Embedded Banking, RegTech, Data Governance,
              System Design, Architecture and more.
            </p>
          </div>

          <div>
            <h3 class='text-lg font-bold'>5PM - 7PM</h3>
            <p class='font-light'>
              Enjoy an evening of networking and mingling - exclusive access to
              Leo's Bar and Terrace, complete with drinks and food.
            </p>
          </div>
        </div>

        <!-- Address -->
        <div class='flex items-end max-lg:order-last mt-8'>
          <p class='font-bold text-lg'>
            XT25 Conference will be held in central London. <br /> Venue details
            will be provided to confirmed attendees.
          </p>
        </div>

        <!-- Form -->
        <div
          id='register'
          class='row-span-4 flex flex-col gap-3 bg-juxt p-6 pb-4 text-black rounded-xl shadow-lg max-w-md mx-auto overflow-hidden'
          style='border-radius: 0.75rem; isolation: isolate;'
        >
          <span
            class='text-white font-semibold uppercase self-center text-center underline text-sm'
          >
            This Event is Invite-Only and Free for Attendees
          </span>
          <ContactUsFormXT24
            client:only
            subject={contactSubject || 'XT25 RFI'}
          />
        </div>
      </div>
    </div>

    <!-- Speakers section with overlay effect, currently not being used... -->
    <!-- <div class='relative'> -->
    <!-- Dark overlay -->
    <!-- <div class='absolute inset-0 bg-black opacity-50 z-0'></div> -->
    <!-- <div class='relative z-10'> -->

    <!-- Speakers -->
    <div
      id='speakers'
      class='flex flex-col px-5 sm:px-10 pt-5 sm:pt-10 gap-6 items-center'
    >
      <h2 class='text-juxt font-bold text-2xl sm:font-bold sm:text-3xl mb-6'>
        Speakers
      </h2>
      <div
        class='grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto w-full'
      >
        {
          speakers.map(({ name, role, company, image, linkedin }) => (
            <a
              href={linkedin && `https://www.linkedin.com/in/${linkedin}`}
              target='_blank'
              class={`speaker-card rounded-xl overflow-hidden flex flex-row shadow-lg w-full ${
                linkedin ? 'cursor-pointer' : 'cursor-default'
              }`}
              style='border-radius: 0.75rem; isolation: isolate; background-color: #3f3f46;'
            >
              <div
                class='w-1/3 md:w-2/5 overflow-hidden rounded-xl'
                style='border-radius: 0.75rem; isolation: isolate;'
              >
                <AssetImage
                  class='w-90 h-90 object-cover object-center m-auto'
                  style='aspect-ratio: 3/4; height: 90%; width: 90%; min-height: 140px; margin: 5%; border-radius: 0.75rem;'
                  src={image}
                  alt={`Headshot of ${name}`}
                />
              </div>
              <div class='w-2/3 md:w-3/5 p-4 flex flex-col justify-center text-white'>
                <h3 class='font-bold text-lg md:text-xl mb-2'>{name}</h3>
                <p class='text-sm md:text-base font-medium mb-2'>{role}</p>
                {company && (
                  <p class='font-bold text-sm md:text-base'>{company}</p>
                )}
              </div>
            </a>
          ))
        }
      </div>
    </div>

    <!-- Agenda -->
    <!-- <div
        id='agenda'
        class='flex flex-col px-5 sm:px-10 pt-10 sm:pt-20 items-center sm:items-start'
      >
        <h2 class='uppercase text-juxt font-semibold sm:font-normal sm:text-xl'>
          Agenda
        </h2>
      </div>
      <div class='flex flex-col pt-5'>
        <XT24Agenda />
      </div>
      <p class='font-thin text-sm pb-5'>
        *Please note agenda and speakers are subject to change
      </p> -->

    <!-- Gap section for visual spacing -->
    <div class='w-full py-2'></div>

    <!-- Speakers and Agenda to be announced  -->
    <div
      class='container max-w-6xl mx-auto flex items-center justify-center'
      style='min-height: 120px;'
    >
      <div
        class='text-center uppercase text-xs sm:text-base text-lg text-white'
      >
        <strong>More speakers and full agenda to be announced soon.</strong>
      </div>
    </div>

    <!-- Gap section for visual spacing -->
    <div class='w-full py-1'></div>

    <!-- XT24 Conference Image Carousel -->
    <div class='w-full mx-auto py-0 overflow-hidden'>
      <div id='imageCarousel' class='flex animate-slide'></div>
    </div>

    <style>
      @keyframes slide {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(
            calc(-100vw / 4 * 22)
          ); /* Width of one image * number of real images (22) */
        }
      }

      .animate-slide {
        animation: slide 100s linear infinite;
      }

      .sr-only {
        /* Hidden from screen readers */
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      .speaker-card {
        transition:
          background-color 0.4s ease,
          transform 0.3s ease,
          box-shadow 0.3s ease;
      }

      .speaker-card:hover {
        background-color: #ffc000 !important;
        transform: translateY(-5px);
        box-shadow:
          0 10px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }

      .speaker-card .text-white {
        transition: color 0.4s ease;
      }

      .speaker-card:hover .text-white {
        color: black !important;
      }
    </style>

    <script>
      // Image paths
      const imagePaths = Array.from(
        { length: 22 }, // Total Images
        (_, i) => `/images/XT25/JUXT XT24 Conference ${i + 1}.jpg`
      )

      // Function to create image element
      function createImageElement(src, alt) {
        const div = document.createElement('div')
        div.className = 'flex-shrink-0'

        // Responsive width based on screen size
        div.style.width = 'calc(100vw)' // Full width on mobile

        // Adjust width based on screen size
        if (window.innerWidth >= 640) {
          div.style.width = 'calc(100vw / 2)' // 2 images on small screens
        }
        if (window.innerWidth >= 768) {
          div.style.width = 'calc(100vw / 3)' // 3 images on medium screens
        }
        if (window.innerWidth >= 1024) {
          div.style.width = 'calc(100vw / 4)' // 4 images on large screens
        }
        if (window.innerWidth >= 2048) {
          div.style.width = 'calc(100vw / 5)' // 5 images on 4k screens
        }

        const img = document.createElement('img')
        img.src = src
        img.alt = alt
        img.className = 'w-full h-64 object-cover'

        div.appendChild(img)
        return div
      }

      // Initialise seamless looping carousel
      function initialiseCarousel() {
        const carousel = document.getElementById('imageCarousel')
        carousel.innerHTML = ''

        // Add the initial main set of images
        imagePaths.forEach((path, index) => {
          carousel.appendChild(
            createImageElement(path, `JUXT XT24 Conference Image ${index + 1}`)
          )
        })

        // Add the same set again for seamless looping
        imagePaths.forEach((path, index) => {
          carousel.appendChild(
            createImageElement(path, `JUXT XT24 Conference Image ${index + 1}`)
          )
        })
      }

      // Initialise the carousel
      initialiseCarousel()

      // Update animation based on screen size
      function updateAnimation() {
        const style = document.createElement('style')

        // Adaptively set the number of images per view based on screen size
        let imagesPerView = 1 // Default for mobile
        if (window.innerWidth >= 640) imagesPerView = 2 // sm
        if (window.innerWidth >= 768) imagesPerView = 3 // md
        if (window.innerWidth >= 1024) imagesPerView = 4 // lg
        if (window.innerWidth >= 2048) imagesPerView = 5 // 4k

        // Create updated keyframes
        style.textContent = `
            @keyframes slide {
              0% {
                transform: translateX(0);
              }
              100% {
                transform: translateX(calc(-100vw / ${imagesPerView} * 22));
              }
            }
            
            .animate-slide {
              animation: slide 120s linear infinite;
            }
          `

        // Add ID to new style and append to document
        style.id = 'carousel-style'
        document.head.appendChild(style)
      }

      // Initial update
      updateAnimation()

      // Update on window resize
      window.addEventListener('resize', () => {
        initialiseCarousel() // Recreate carousel with new widths
        updateAnimation() // Update animation parameters
      })
    </script>
  </div>
</Layout>
