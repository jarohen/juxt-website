---
import ContactUsFormXT24 from '@components/ContactUsFormXT24'
import { LinkedInIcon } from '@components/Icons'
import AssetImage from '@components/team/AssetImage.astro'
import XT24Agenda from '@components/XT24Agenda.astro'
import Layout from '@layouts/Layout.astro'
import speakers from '../data/xt25/speakers.json'

const { contactSubject } = Astro.props
---

<Layout
  title='XT25 Fintech Conference'
  ogImage='/images/XT25/XT25_SaveTheDate.png'
  ogTitle='XT25 Fintech Conference'
  ogDescription='Join fintech engineering leaders for a day of tech talks on GenAI, Platform Engineering, Banking, RegTech, System Architecture and more.'
>
  <div class='bg-zinc-800 pb-5'>
    <!-- Background Image Section -->
    <div
      class='relative bg-cover bg-center'
      style="background-image: url('/images/XT25/london-bridge.jpg'); background-size: cover;"
    >
      <div class='absolute inset-0 bg-black opacity-70'></div>
      <div
        class='container max-w-6xl mx-auto flex flex-col text-white relative'
      >
        <!-- JUXT Logo -->
        <div
          class='w-full px-5 sm:px-10 pt-5 sm:pt-10 flex flex-row justify-end'
        >
          <a href='/'>
            <img
              class='w-[150px] sm:w-[200px] md:w-[250px] max-w-[80%]'
              src='/images/logo.svg'
              alt='JUXT Logo'
            />
          </a>
        </div>

        <!-- XT25 Logo & Navigation -->
        <div class='p-5 pb-0 sm:px-10'>
          <div>
            <!-- Hidden H1 for SEO -->
            <h1 class='sr-only'>XT25 Fintech Conference</h1>

            <img
              width={800}
              src='/images/XT25/XT25 Header.png'
              alt='XT25 Fintech Conference Logo'
            />
            <div class='w-full pt-4 flex flex-row gap-3'>
              <!-- <span class='sm:hidden uppercase underline text-juxt'
                ><a href='#register'>Register</a></span
              > -->
              <!-- <p class='sm:hidden'>|</p> -->
              <span class='uppercase underline text-juxt font-bold'
                ><a href='#speakers'>Speakers</a></span
              >
              <!-- <p>|</p>
              <span class='uppercase underline text-juxt'
                ><a href='#agenda'>Agenda</a></span
              > -->
            </div>
          </div>
        </div>

        <!-- Main content -->
        <div
          class='grid grid-cols-1 lg:grid-cols-2 lg:grid-flow-col p-5 pt-2 sm:p-10 sm:pt-6 gap-4'
        >
          <!-- Blurb -->
          <p class='font-light text-lg mb-2'>
            Engineering Leaders from global banks, fintech companies and hedge
            funds are meeting in London to explore how groundbreaking technology
            concepts, tools and solutions are shaping the future of financial
            services.
          </p>

          <!-- Details -->
          <h2
            class='uppercase text-juxt font-semibold sm:font-normal sm:text-xl mb-4'
          >
            Thursday | 12 June 2025 | London
          </h2>

          <!-- Event plan -->
          <div class='grid grid-cols-1 sm:max-lg:grid-cols-2 gap-5'>
            <div>
              <h3 class='text-lg'>9AM - 5PM</h3>
              <p class='font-light text-lg'>
                Join fintech leaders for a day of tech talks covering GenAI,
                Platform Engineering, Embedded Banking, RegTech, Data
                Governance, System Design, Architecture and more.
              </p>
            </div>

            <div>
              <h3 class='text-lg'>5PM - 7PM</h3>
              <p class='font-light text-lg'>
                Enjoy an evening of networking and mingling - exclusive access
                to Leo's Bar and Terrace, complete with drinks and food.
              </p>
            </div>
          </div>

          <!-- Address -->
          <div class='flex items-end max-lg:order-last'>
            <p class='uppercase text-xs sm:text-base text-lg'>
              XT25 Conference will be held in central London. <br /> Venue
              details will be provided to confirmed attendees.
            </p>
          </div>

          <!-- Form -->
          <div
            id='register'
            class='row-span-4 flex flex-col gap-4 bg-white p-10 text-black'
          >
            <span
              class='text-juxt text-2xl font-semibold uppercase self-center text-center'
            >
              This Event is Invite-Only and Free for Attendees
            </span>
            <ContactUsFormXT24
              client:only
              subject={contactSubject || 'XT25 RFI'}
            />
          </div>
        </div>
      </div>
    </div>

    <!-- Speakers -->
    <div
      id='speakers'
      class='flex flex-col px-5 sm:px-10 pt-5 sm:pt-10 gap-6 items-center'
    >
      <h2 class='uppercase text-juxt font-semibold sm:font-normal sm:text-xl'>
        Speakers
      </h2>
      <div
        class='grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-8 max-w-6xl mx-auto justify-items-center'
      >
        {
          speakers.map(({ name, role, company, image, linkedin }) => (
            <a
              href={linkedin && `https://www.linkedin.com/in/${linkedin}`}
              target='_blank'
              class='flex justify-center'
            >
              <div class='flex flex-col items-center text-white w-full max-w-[9rem] sm:max-w-[11rem]'>
                <AssetImage
                  class='w-44 h-64 object-cover object-center'
                  src={image}
                  alt={`Headshot of ${name}`}
                />
                <div class='flex items-center gap-2 mt-2'>
                  <h3 class='text-sm sm:text-base'>{name}</h3>
                  {linkedin && (
                    <LinkedInIcon className='w-3 h-3 fill-cyan-700' />
                  )}
                </div>
                <p class='font-extralight text-xs text-center'>
                  {role}
                  {company && (
                    <>
                      {' @ '}
                      <span class='font-bold'>{company.toUpperCase()}</span>
                    </>
                  )}
                </p>
              </div>
            </a>
          ))
        }
      </div>
    </div>

    <!-- Agenda -->
    <!-- <div
      id='agenda'
      class='flex flex-col px-5 sm:px-10 pt-10 sm:pt-20 items-center sm:items-start'
    >
      <h2 class='uppercase text-juxt font-semibold sm:font-normal sm:text-xl'>
        Agenda
      </h2>
    </div>
    <div class='flex flex-col pt-5'>
      <XT24Agenda />
    </div>
    <p class='font-thin text-sm pb-5'>
      *Please note agenda and speakers are subject to change
    </p> -->

    <!-- Gap section for visual spacing -->
    <div class='w-full py-2'></div>

    <!-- Speakers and Agenda to be announced  -->
    <div
      class='container max-w-6xl mx-auto flex items-center justify-center'
      style='min-height: 120px;'
    >
      <div
        class='text-center uppercase text-xs sm:text-base text-lg text-white'
      >
        <strong>More speakers and full agenda to be announced soon.</strong>
      </div>
    </div>

    <!-- Gap section for visual spacing -->
    <div class='w-full py-1'></div>

    <!-- XT24 Conference Image Carousel -->
    <div class='w-full mx-auto py-0 overflow-hidden'>
      <div id='imageCarousel' class='flex animate-slide'></div>
    </div>

    <style>
      @keyframes slide {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(
            calc(-100vw / 4 * 22)
          ); /* Width of one image * number of real images (22) */
        }
      }

      .animate-slide {
        animation: slide 100s linear infinite;
      }

      .sr-only {
        /* Hidden from screen readers */
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }
    </style>

    <script>
      // Image paths
      const imagePaths = Array.from(
        { length: 22 }, // Total Images
        (_, i) => `/images/XT25/JUXT XT24 Conference ${i + 1}.jpg`
      )

      // Function to create image element
      function createImageElement(src, alt) {
        const div = document.createElement('div')
        div.className = 'flex-shrink-0'

        // Responsive width based on screen size
        div.style.width = 'calc(100vw)' // Full width on mobile

        // Adjust width based on screen size
        if (window.innerWidth >= 640) {
          div.style.width = 'calc(100vw / 2)' // 2 images on small screens
        }
        if (window.innerWidth >= 768) {
          div.style.width = 'calc(100vw / 3)' // 3 images on medium screens
        }
        if (window.innerWidth >= 1024) {
          div.style.width = 'calc(100vw / 4)' // 4 images on large screens
        }
        if (window.innerWidth >= 2048) {
          div.style.width = 'calc(100vw / 5)' // 5 images on 4k screens
        }

        const img = document.createElement('img')
        img.src = src
        img.alt = alt
        img.className = 'w-full h-64 object-cover'

        div.appendChild(img)
        return div
      }

      // Initialise seamless looping carousel
      function initialiseCarousel() {
        const carousel = document.getElementById('imageCarousel')
        carousel.innerHTML = ''

        // Add the initial main set of images
        imagePaths.forEach((path, index) => {
          carousel.appendChild(
            createImageElement(path, `JUXT XT24 Conference Image ${index + 1}`)
          )
        })

        // Add the same set again for seamless looping
        imagePaths.forEach((path, index) => {
          carousel.appendChild(
            createImageElement(path, `JUXT XT24 Conference Image ${index + 1}`)
          )
        })
      }

      // Initialise the carousel
      initialiseCarousel()

      // Update animation based on screen size
      function updateAnimation() {
        const style = document.createElement('style')

        // Adaptively set the number of images per view based on screen size
        let imagesPerView = 1 // Default for mobile
        if (window.innerWidth >= 640) imagesPerView = 2 // sm
        if (window.innerWidth >= 768) imagesPerView = 3 // md
        if (window.innerWidth >= 1024) imagesPerView = 4 // lg
        if (window.innerWidth >= 2048) imagesPerView = 5 // 4k

        // Create updated keyframes
        style.textContent = `
          @keyframes slide {
            0% {
              transform: translateX(0);
            }
            100% {
              transform: translateX(calc(-100vw / ${imagesPerView} * 22));
            }
          }
          
          .animate-slide {
            animation: slide 120s linear infinite;
          }
        `

        // Add ID to new style and append to document
        style.id = 'carousel-style'
        document.head.appendChild(style)
      }

      // Initial update
      updateAnimation()

      // Update on window resize
      window.addEventListener('resize', () => {
        initialiseCarousel() // Recreate carousel with new widths
        updateAnimation() // Update animation parameters
      })
    </script>
  </div>
</Layout>
